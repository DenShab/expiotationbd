{% extends 'main/base.html' %}

{% block title %}
Карточка сотрудника
{% endblock %}

{% block name %}
Карточка сотрудника
{% endblock %}

{% block content %}
{% load static %}

<h4 class="mb-3">Данные о сотруднике</h4>
<div class="row g-3">
    <div class="col-sm-4">
        <label class="form-label">Фамилия</label>

        <input class="form-control" type="text" value="{{ person.surname }}" readonly>

        <div class="invalid-feedback">
            Valid first name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Имя</label>

        <input class="form-control" type="text" value="{{ form.name }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Отчество</label>

        <input class="form-control" type="text" value="{{ person.middleName }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Дата рождения</label>

        <input class="form-control" type="text" value="{{ person.birthDate }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Номер телефона</label>

        <input class="form-control" type="text" value="{{ person.phoneNumber }}" readonly>
        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Электронная почта</label>

        <input class="form-control" type="text" value="{{ person.email }}" readonly>
        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Дата трудоустройства</label>
        <input class="form-control" type="text" value="{{ person.dateOfEmployment }}" readonly>
        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Структурное подразделение</label>
        <input class="form-control" type="text" value="{{ person.structuralDivision }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Отдел</label>

        <input class="form-control" type="text" value="{{ person.department }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <div class="col-sm-4">
        <label class="form-label">Должность</label>

        <input class="form-control" type="text" value="{{ person.heldPost }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>

    <hr class="my-4">

    <h4 class="mb-3">Обучение</h4>
    <h6 class="mb-3">Обязательно обучение</h6>
<div class="table-responsive">
    <table class="table form-table table-bordered table-sm">
        <thead class="text-center">
        <tr>
            <th>Название обучения</th>
            <th>Тип обучения</th>
            <th>Дата прохождения</th>
            <th>Дата повторного прохождения</th>
            <th>Импортировать</th>
        </tr>
        </thead>
        <tbody>
        {% for item in compulsoryEducation %}
        <tr class="item_{{ compulsoryEducation.prefix }}">
            <td>
                {{ item.nameOfTraining }}
            </td>
            <td>
                {{ item.typeOfTraining }}
            </td>
            <td>
                {{ item.dateOfCompletionOfTraining }}
            </td>
            <td>
                {{ item.dateOfRepeatedPassageOfTraining }}
            </td>
            <td>
                {% for key, value in compulsoryEducationFiles.items %}
                {% if key == item.id %}
                {% for f in value %}
                     <a href="{{f.file.url}}" download="">{{f.file}}</a>
                {% endfor %}
                {% endif %}
                {% endfor %}
            </td>


        </tr>
        {% endfor %}
        </tbody>
    </table>
</div >

    <h4 class="mb-3">Дополнительное обучение</h4>
    <div class="table-responsive">
    <table class="table form-table table-bordered table-sm">
        <thead class="text-center">
        <tr>
            <th>Название обучения</th>
            <th>Тип обучения</th>
            <th>Дата прохождения</th>
            <th>Дата повторного прохождения</th>
            <th>Импортировать</th>
        </tr>
        </thead>
        <tbody>
        {% for item in additionalTraining %}
        <tr class="item_{{ additionalTraining.prefix }}">
            <td>
                {{ item.nameOfTraining }}
            </td>
            <td>
                {{ item.typeOfTraining }}
            </td>
            <td>
                {{ item.dateOfCompletionOfTraining }}
            </td>
            <td>
                {{ item.dateOfRepeatedPassageOfTraining }}
            </td>
            <td>
                {% for key, value in additionalTrainingFiles.items %}
                {% if key == item.id %}
                {% for f in value %}
                     <a href="{{f.file.url}}" download="">{{f.file}}</a>
                {% endfor %}
                {% endif %}
                {% endfor %}
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

    <h4 class="mb-3">Медосмотр</h4>
    {% for item in medicalExamination %}
    <div class="col-sm-4">
        <label class="form-label">Дата прохождения медосмотра</label>

        <input class="form-control" type="text" value="{{ item.dateOfMedicalExamination }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>
    <div class="col-sm-4">
        <label class="form-label">Дата повторного прохождения медосмотра</label>

        <input class="form-control" type="text" value="{{ item.dateOfRepeatedMedicalExamination }}" readonly>

        <div class="invalid-feedback">
            Valid last name is required.
        </div>
    </div>
    {% endfor %}

    <hr class="my-4">
    <div class="btn-group">
        <button type="button" class="btn btn-danger" name="cancel" onclick=" relocate_home()">Отменить
                    </button>
    </div>
</div>



{% endblock %}

{% block extra_script %}
<script type="text/javascript">

function relocate_home()
{
     location.href = "/";
}

function relocate_this()
{
     location.href = "";
}



</script>


{% endblock%}